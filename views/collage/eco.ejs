<% layout('layouts/boilerhome')%>

<div class="container mt-1 mb-4">
  <h1>Economic Building Floors</h1>
  <div class="d-flex flex-row mt-3 justify-content-center">
    <button class="btn btn-light mb-2 mx-2 col-1 rounded-pill floor-button" data-floor="1">Floor 1</button>
    <button class="btn btn-light mb-2 mx-2 col-1 rounded-pill floor-button" data-floor="2">Floor 2</button>
    <button class="btn btn-light mb-2 mx-2 col-1 rounded-pill floor-button" data-floor="3">Floor 3</button>
  </div>
  <div class="all-cards floor-1 d-flex mt-4 mb-5">
    <div class="fully-card mx-auto">
      <div class="card" style="width: 18rem;">
        <div class="card-header text-dark">
          Doctor's offices
        </div>
        <ul class="list-group list-group-flush">
          <% if (Array.isArray(users) && users.length > 0) { %> 
            <% for (let i = 0; i < users.length; i++) { %>
              <% const user = users[i]; %>
              <% if (user.collage === 'Economic') { %>
                <% if (schedules && schedules.length > 0) { %>
                  <% for (let j = 0; j < schedules.length; j++) { %>
                    <% const schedule = schedules[j]; %>
                    <li class="list-group-item text-dark">
                    <a href="/schedules/<%= schedule._id %>" class="text-decoration-none"><%= user.username %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle-fill mx-auto" viewBox="0 0 16 16">
                        <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                      </svg>
                    </a>
                    </li>
                  <% } %>
                <% } else { %>
                  <p>This Doctor Has No Schedule</p>
                <% } %>
              <% } %>
            <% } %>
          <% } else { %>
            <p class="text-dark">No Doctors found.</p>
          <% } %>
        </ul>
      </div>
    </div>
  </div>

  <div class="all-cards floor-1 d-flex mt-4 mb-5">
    <div class="fully-card mx-auto">
      <div class="card" style="width: 18rem;">
        <div class="card-header text-dark">
          Doctor's offices
        </div>
        <ul class="list-group list-group-flush">
          <% if (Array.isArray(users) && users.length > 0) { %> 
            <% for (let i = 0; i < users.length; i++) { %>
              <% const user = users[i]; %>
              <% if (user.collage === 'Economic') { %>
                <% if (schedules && schedules.length > 0) { %>
                  <% for (let j = 0; j < schedules.length; j++) { %>
                    <% const schedule = schedules[j]; %>
                    <li class="list-group-item text-dark">
                    <a href="/schedules/<%= schedule._id %>" class="text-decoration-none"><%= user.username %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle-fill mx-auto" viewBox="0 0 16 16">
                        <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                      </svg>
                    </a>
                    </li>
                  <% } %>
                <% } else { %>
                  <p>This Doctor Has No Schedule</p>
                <% } %>
              <% } %>
            <% } %>
          <% } else { %>
            <p class="text-dark">No Doctors found.</p>
          <% } %>
        </ul>
      </div>
    </div>
  </div>

  <div class="all-cards floor-1 d-flex mt-4 mb-5">
    <div class="fully-card mx-auto">
      <div class="card" style="width: 18rem;">
        <div class="card-header text-dark">
          Doctor's offices
        </div>
        <ul class="list-group list-group-flush">
          <% if (Array.isArray(users) && users.length > 0) { %> 
            <% for (let i = 0; i < users.length; i++) { %>
              <% const user = users[i]; %>
              <% if (user.collage === 'Economic') { %>
                <% if (schedules && schedules.length > 0) { %>
                  <% for (let j = 0; j < schedules.length; j++) { %>
                    <% const schedule = schedules[j]; %>
                    <li class="list-group-item text-dark">
                    <a href="/schedules/<%= schedule._id %>" class="text-decoration-none"><%= user.username %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle-fill mx-auto" viewBox="0 0 16 16">
                        <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                      </svg>
                    </a>
                    </li>
                  <% } %>
                <% } else { %>
                  <p>This Doctor Has No Schedule</p>
                <% } %>
              <% } %>
            <% } %>
          <% } else { %>
            <p class="text-dark">No Doctors found.</p>
          <% } %>
        </ul>
      </div>
    </div>
  </div>

  <script>
    const floorButtons = document.querySelectorAll('.floor-button');
    const allCards = document.querySelectorAll('.all-cards');
  
    floorButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const floor = button.dataset.floor;
        allCards.forEach((cards) => {
          cards.classList.remove('d-flex');
          cards.classList.add('d-none');
        });
  
        const selectedFloor = document.querySelector(`.floor-${floor}`);
        selectedFloor.classList.remove('d-none');
        selectedFloor.classList.add('d-flex');
      });
    });
  
    const floor1Button = document.querySelector('.floor-button[data-floor="1"]');
    floor1Button.click();
  </script>
  